#General
type Transaction @entity(immutable: true) {
  id: Bytes!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type User @entity() {
  id: Bytes!
  email: String! # string
  username: String! # string
  fullName: String! # string
  accountId: BigInt! # uint256
  photo: String! # string
  lastPhotoUpdate: BigInt! # uint256
  createdAt: BigInt! # uint256
  hasProfile: Boolean! # bool
  totalReputation: BigInt! # uint256
  totalLatePayments: BigInt! # uint256
  totalCirclesCompleted: BigInt! # uint256
  totalGoalsCompleted: BigInt! # uint256
  personalGoals: [PersonalGoalCreated!]! @derivedFrom(field: "user")
  earlyWithdrawals: [GoalWithdrawn!]! @derivedFrom(field: "user")
}

#User Profile
type ProfileCreated @entity(immutable: true) {
  id: Bytes!
  user: User!
  transaction: Transaction!
}

type PhotoUpdated @entity(immutable: true) {
  id: Bytes!
  user: User!
  transaction: Transaction!
}

#User Reputation
type LatePaymentRecorded @entity(immutable: true) {
  id: Bytes!
  user: User!
  circle: CircleStarted!
  round: BigInt! # uint256
  fee: BigInt! # uint256
  transaction: Transaction!
}

type CircleCompleted @entity(immutable: true) {
  id: Bytes!
  user: User!
  circle: CircleStarted!
  transaction: Transaction!
}

type GoalCompleted @entity(immutable: true) {
  id: Bytes!
  user: User!
  goal: PersonalGoalCreated!
  transaction: Transaction!
}

type ReputationDecreased @entity() {
  id: Bytes!
  user: User!
  points: BigInt! # uint256
  reason: String! # string
  transaction: Transaction!
}

type ReputationIncreased @entity() {
  id: Bytes!
  user: User!
  points: BigInt! # uint256
  reason: String! # string
  transaction: Transaction!
}

type ScoreCategoryChanged @entity() {
  id: Bytes!
  user: User!
  oldCategory: Enum! 
  newCategory: Enum! 
  transaction: Transaction!
}